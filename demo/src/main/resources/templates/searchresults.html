<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>搜索结果</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
  <h1>Searching results</h1>

  <!-- 显示搜索结果的条数 -->
  <div class="mb-4">
    <h2> <span th:text="${resultCount}">0</span> results found</h2>
  </div>

  <!-- 搜索表单 -->
  <div class="mb-4">
    <form action="/test/search2" method="get">
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" id="title" name="title" class="form-control" th:value="${title}">
      </div>

      <div class="form-group">
        <label for="publisher">Publisher</label>
        <select id="publisher" name="publisher" class="form-control">
          <option value="" th:selected="${publisher == null}">All kinds</option>
          <th:block th:each="pub : ${publishers}">
            <option th:value="${pub}" th:text="${pub}" th:selected="${pub == publisher}"></option>
          </th:block>
        </select>
      </div>

      <div class="form-group">
        <label for="sourceType">Source Type</label>
        <select id="sourceType" name="sourceType" class="form-control">
          <option value="" th:selected="${sourceType == null}">All kinds</option>
          <th:block th:each="type : ${sourceTypes}">
            <option th:value="${type}" th:text="${type}" th:selected="${type == sourceType}"></option>
          </th:block>
        </select>
      </div>

      <div class="form-group">
        <label for="language">Language</label>
        <select id="language" name="language" class="form-control">
          <option value="" th:selected="${language == null}">All kinds</option>
          <th:block th:each="lang : ${languages}">
            <option th:value="${lang}" th:text="${lang}" th:selected="${lang == language}"></option>
          </th:block>
        </select>
      </div>

      <div class="form-group">
        <label for="published">Published</label>
        <select id="published" name="published" class="form-control">
          <option value="" th:selected="${published == null}">All kinds</option>
          <th:block th:each="pubDate : ${publisheds}">
            <option th:value="${pubDate}" th:text="${pubDate}" th:selected="${pubDate == published}"></option>
          </th:block>
        </select>
      </div>

      <div class="form-group">
        <label for="status">Status</label>
        <select id="status" name="status" class="form-control">
          <option value="" th:selected="${status == null}">All kinds</option>
          <th:block th:each="stat : ${statuses}">
            <option th:value="${stat}" th:text="${stat}" th:selected="${stat == status}"></option>
          </th:block>
        </select>
      </div>

      <div class="form-group">
        <label for="databaseId">Database</label>
        <select id="databaseId" name="databaseId" class="form-control">
          <option value="" th:selected="${databaseId == null}">All kinds</option>
          <th:block th:each="dbId : ${databaseIds}">
            <option th:value="${dbId}" th:text="${dbId}" th:selected="${dbId == databaseId}"></option>
          </th:block>
        </select>
      </div>

      <button type="submit" class="btn btn-primary">Search</button>
    </form>
  </div>

  <!-- 搜索结果表格 -->
  <table class="table table-striped">
    <thead>
    <tr>
      <th>Title</th>
      <th>Alternate Title</th>
      <th>Source Type</th>
      <th>Authors</th>
      <th>ISBN</th>
      <th>Publisher</th>
      <th>Published</th>
      <th>Status</th>
      <th>Database</th>
      <th>Loan</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="book : ${books}">
      <td th:text="${book.title}">Title</td>
      <td th:text="${book.alternativeTitle}">Alternative Title</td>
      <td th:text="${book.sourceType}">Source Type</td>
      <td th:text="${book.author}">Author</td>
      <td th:text="${book.isbn}">ISBN</td>
      <td th:text="${book.publisher}">Publisher</td>
      <td th:text="${book.published}">Published</td>
      <td th:text="${book.status}">Status</td>
      <td th:text="${book.resourcesId}">Resources ID</td>
      <td th:text="${book.loanLabel}">Loan Label</td>
    </tr>
    </tbody>
  </table>

  <!-- 返回搜索页面的链接 -->
  <a href="/test/searchPage" class="btn btn-secondary mt-3">返回搜索页面</a>
</div>
</body>
</html>
